{% extends 'base.html.twig' %}

{% block body %}
    <h1 class="text-2xl font-bold mb-6">Comptes Bancaires</h1>
    <table class="w-full bg-white shadow-md rounded text-left">
        <thead class="bg-gray-200">
        <tr>
            <th class="p-4">Nom</th>
            <th class="p-4">Type</th>
            <th class="p-4">Solde</th>
            <th class="p-4">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for account in accounts %}
            <tr>
                <td class="p-4">{{ account.name }}</td>
                <td class="p-4">{{ account.type }}</td>
                <td class="p-4">{{ account.balance }}€</td>
                <td class="p-4">
                    <a href="{{ path('app_account_edit', {'id': account.id}) }}" class="bg-yellow-500 hover:bg-yellow-600 text-white py-1 px-3 rounded">Modifier</a>
                    <a href="{{ path('app_account_delete', {'id': account.id}) }}" class="bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded">Supprimer</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_account_new') }}">Nouveau compte</a>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const deleteLinks = document.querySelectorAll('.delete-link');
            deleteLinks.forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    if (confirm('Êtes-vous sûr de vouloir supprimer ce compte ?')) {
                        window.location.href = this.href;
                    }
                });
            });
        });
    </script>
{% endblock %}